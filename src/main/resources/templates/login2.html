<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>公文系统-登陆</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <script th:replace="header :: header"></script>
        <link rel="stylesheet" href="/styles/sweet-alert.css"/>
        <script src="/js/jquery.min.js"></script>
        <script src="/js/sweet-alert.min.js"></script>


    </head>

	<body class="login-layout" style="background: #1d2b64;
        background: radial-gradient(circle farthest-side at right bottom,#fefdfe 5%,#f8cdda 25%,#1d2b64 80%,#0e153a 98%);" onload="$('#username').focus()">
		<div class="main-container">
			<div class="main-content">
				<div class="row">
					<div class="col-sm-10 col-sm-offset-1">
                        <div class="center">
                            <h1>
                                <i class="icon-group green"></i>
                                <span class="red">国家海洋局东海预报中心办公系统</span>
                                <span class="white">办公系统</span>
                            </h1>

        <!--                    <h4 class="blue">&copy; 信息中心&lt;!&ndash;&amp;上海海洋大学数字海洋研究所&ndash;&gt;</h4>-->
                        </div>
						<div class="login-container">
							<div class="space-6"></div>

							<div class="position-relative">
								<div id="login-box" class="login-box visible widget-box no-border">
									<div class="widget-body">
										<div class="widget-main">
                                            <div class="alert alert-danger" th:if="${param.error}" id="InputFail">
                                                <button type="button" class="close" data-dismiss="alert">
                                                    <i class="icon-remove" onclick="$('#InputFail').hide()"></i>
                                                </button>

                                                <strong>
                                                    <i class="icon-remove"></i>
                                                    登录失败
                                                </strong>

                                                错误的用户名或密码
                                                <br>
                                            </div>
                                            <div class="alert alert-info" th:if="${param.logout}" id="logoutDiv">
                                                <button type="button" class="close"  data-dismiss="alert">
                                                    <i class="icon-remove" onclick="$('#logoutDiv').hide()"></i>
                                                </button>
                                                <strong>成功！</strong>

                                                您已经成功安全退出
                                                <br>
                                            </div>
											<h4 class="header blue lighter bigger">
												<i class="icon-coffee green"></i>
												请输入登录信息
											</h4>

											<div class="space-6"></div>

											<form id="userform" th:action="@{/login}" method="post">
												<fieldset>
													<label class="block clearfix">
														<span class="block input-icon input-icon-right">
															<input type="text" id="username" name="username" class="form-control" placeholder="请输入用户名" />
															<i class="icon-user"></i>
														</span>
													</label>

													<label class="block clearfix">
														<span class="block input-icon input-icon-right">
															<input type="password" id="password" name="password" class="form-control" placeholder="请输入密码" />
															<i class="icon-lock"></i>
														</span>
													</label>

													<div class="space"></div>

													<div class="clearfix">
														<label class="inline">
															<input id="ck_rmbUser" type="checkbox" class="ace" />
															<span class="lbl"> 记住用户名</span>
														</label>

														<button id="submitbtn"  onclick="saveUserInfo();" class="width-35 pull-right btn btn-sm btn-primary">
															<i class="icon-key"></i>
															登陆
														</button>
													</div>


													<div class="space-4"></div>
												</fieldset>
											</form>

											</div>
										</div><!-- /widget-main -->

										<div class="toolbar clearfix">


											<!--<div>-->
												<!--<a href="/navigator/chrome-sync-extension.crx"  class="user-signup-link">-->
													<!--签名插件-->
													<!--<i class="icon-arrow-right"></i>-->
												<!--</a>-->
											<!--</div>-->
                                            <!--<div>-->
                                                <!--<a href="/navigator/Notification_Desk.crx"  class="user-signup-link">-->
                                                    <!--通知插件-->
                                                    <!--<i class="icon-arrow-right"></i>-->
                                                <!--</a>-->
                                            <!--</div>-->
										</div>
                                    <div class="center">
                                        <a href="/navigator/Chrome.exe"  class="forgot-password-link">

                                            <i class="icon-download-alt">  谷歌浏览器</i>

                                        </a>
                                        <span>  </span>
                                        <a href="/navigator/chrome-sync-extension.crx"  class="forgot-password-link">

                                            <i class="icon-download-alt">  签名插件</i>
                                        </a>
                                        <span>  </span>
                                        <a href="/navigator/Notification_Desk.crx"  class="forgot-password-link">

                                            <i class="icon-download-alt">  通知插件</i>
                                        </a>
                                    </div>
									</div><!-- /widget-body -->
								</div><!-- /login-box -->
							</div><!-- /position-relative -->
						</div>
					</div><!-- /.col -->
				</div><!-- /.row -->
			</div>
		</div><!-- /.main-container -->

		<!-- basic scripts -->

		<!--[if !IE]> -->



		<!-- <![endif]-->

		<!--[if IE]>

<![endif]-->

		<!--[if !IE]> -->

		<script type="text/javascript">
			window.jQuery || document.write("<script src='assets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");
		</script>



		<!-- <![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

		<script type="text/javascript">
			if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>

		<!-- inline scripts related to this page -->
        <script src="/js/jquery.base64.min.js" type="text/javascript" ></script>
        <script src="/js/jquery.cookie.js" type="text/javascript" ></script>
        <script type="text/javascript" src="/js/jquery.cookie.js"></script>


        <script th:inline="javascript">
			function show_box(id) {
			 jQuery('.widget-box.visible').removeClass('visible');
			 jQuery('#'+id).addClass('visible');
			}

            //if(Sys.opera) alert('Opera: '+Sys.opera);
            //if(Sys.safari) alert('Safari: '+Sys.safari);


            $(document).ready(function() {
                //alert("用户名：" + $.cookie("username"));
                /*if ($.cookie("rmbUser") == "true") {
                    $("#ck_rmbUser").attr("checked", true);
                    $("#username").val($.cookie("username"));
                }*/

                if ($.cookie("rmbUser") == "true") {
                    $("#ck_rmbUser").attr("checked", true);
                    $("#username").val($.cookie("username"));
                }


            });


            function saveUserInfo() {

                if ($("#ck_rmbUser").is(":checked")) {
                    var userName = $("#username").val();
                    $.cookie("rmbUser", "true", {
                        expires : 7
                    }); // 存储一个带7天期限的 cookie
                    $.cookie("username", userName, {
                        expires : 7
                    }); // 存储一个带7天期限的 cookie

                } else {
                    $.cookie("rmbUser", "false", {
                        expires : -1
                    });
                    $.cookie("username", '', {
                        expires : -1
                    });

                }
                console.log("success");
                $("#userform").submit();

                // $.cookie(COOKIE_NAME,$("#username").val(), { path: '/', expires: 10 });

            }

           /* $(function() {
                var Sys = {};
                var ua = navigator.userAgent.toLowerCase();
                var s;
                var scan;
                (s = ua.match(/msie ([\d.]+)/)) ? Sys.ie = s[1] :
                        (s = ua.match(/firefox\/([\d.]+)/)) ? Sys.firefox = s[1] :
                                (s = ua.match(/chrome\/([\d.]+)/)) ? Sys.chrome = s[1] :
                                        (s = ua.match(/opera.([\d.]+)/)) ? Sys.opera = s[1] :
                                                (s = ua.match(/version\/([\d.]+).*safari/)) ? Sys.safari = s[1] : 0;
                if(!Sys.firefox&&!Sys.chrome){
                    swal({
                                title: "浏览器不匹配",
                                text: "继续使用该浏览器可能会出现问题，建议安装谷歌浏览器",
                                type: "warning",
                                showCancelButton: true,
                                confirmButtonColor: "#458B00",
                                confirmButtonText: "安装(推荐)",
                                cancelButtonText: "继续使用",
                                closeOnConfirm: false },
                            function(){
                                window.location.href="/navigator/Chrome.exe";
                            });
                }*/
               /*var ua = navigator.userAgent.toLowerCase();
                var b= ua.indexOf("MSIE");

                if(b>0){
                    var ieVersion = parseInt(ua.substring(b+5,ua.indexOf(";",b)));
                    if(ieVersion<9){
                        swal({
                                    title: "浏览器不匹配",
                                    text: "检测到您的IE浏览器版本过低，请安装高版本IE浏览器",
                                    type: "warning",
                                    showCancelButton: true,
                                    confirmButtonColor: "#458B00",
                                    confirmButtonText: "安装高版本IE浏览器",
                                    cancelButtonText: "继续使用原版本浏览器",
                                    closeOnConfirm: false },
                                function(){
                                    window.location.href="/navigator/IE10.exe";
                                });
                    }
                }
                else{
                    if(ua.indexOf("chrome")==-1){
                        swal({
                                    title: "浏览器不匹配",
                                    text: "检测到您的浏览器类型不匹配，请安装chrome浏览器",
                                    type: "warning",
                                    showCancelButton: true,
                                    confirmButtonColor: "#458B00",
                                    confirmButtonText: "安装chrome浏览器",
                                    cancelButtonText: "继续使用原浏览器",
                                    closeOnConfirm: false },
                                function(){
                                    window.location.href="/navigator/Firefox Setup 32.exe";
                                });
                    }
                }*/
                /*else{

                }*/
                $("#userform").submit(function(e){
                    var username = $("#username").val();
                    var password = $("#password").val();
                    userbase64 = "Basic "+$.base64.encode(username+":"+password);

                    $.cookie('userbase64',userbase64);
                    //$.cookie('userbase64',userbase64);

                });

		</script>

	</body>
</html>
